<html>
<head><title>Shadow Caster Isometric Mapper and Resource Extractor</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<style type="text/css">

body{
    font-family: sans-serif;
    margin: 3em;
    max-width: 100em;
}


a { text-decoration: none;}

a:visited{
    color: #1555AA;
}

a:link{
    color: #1555AA;
}

a:hover{
    color: #48F;
}

h1 {
    font-size: 3em;
    margin: 0;
    font-weight: normal;
}

h2 {
    font-size: 1.8em;
    color: #248;
    font-weight: normal;
    margin: 1em 0 0.5em;
}


h3, h4, h5, h6{
    color: #248;
    font-weight: bold;
}

h3 {
    font-size: 1.6em;
}

h4
{
    font-size: 1.4em;
}

h5 {
    font-size: 1.2em;
}

h6 {
    font-size: 1.0em;
}


</style>
</head>
<body>
<h1><a href="http://www.zerker.ca/zzone/2012/11/14/shadow-caster-isometric-mapper-and-resource-extractor">Shadow Caster Isometric Mapper and Resource Extractor</a></h1>

<h2>About and Dependencies</h2>

<p>This is a series of Python scripts to generate Isometric views of Shadow Caster maps, as well as extract most of the Shadow Caster Resources. These scripts require <a href="http://www.pythonware.com/products/pil/index.htm">the Python Imaging Library (PIL)</a> and <a href="http://python.org/">Python 2.x</a> (tested with Python 2.7.3). PIL unfortunately does not yet support Python 3, which prevents these scripts from being forward-compatible at this time.

<p>Windows users should be able to download Python and PIL from the above links. Most Linux/Unix varients should be able to install Python and PIL via your package manager of choice; Ubuntu users can install the <strong>python</strong> and <strong>python-imaging</strong> libraries. OSX users should already have Python, but you may need to compile PIL yourself via the source download at the PIL website.

<p>The scripts also obviously require <strong>Shadow Caster (CD version)</strong>, which can be a bit hard to find nowadays. Purchasing a used copy on eBay or other used game source appears to be the only option.

<p>Special thanks to the <a href="http://slade.mancubus.net/">SLADE Editor</a> and everyone on the <a href="http://www.doomworld.com/vb/everything-else/43927-shadowcaster-modding/">ShadowCaster modding thread at Doomworld</a>. Both sources were instrumental in the development of these tools.</p>

<p>Please note the <strong>sample.png</strong> image file is used to obtain the Shadow Caster colour
palette and is required for this tool to work.</p>

<h2>Usage</h2>

<p>There are three scripts included in the package that are intended to be executed directly.
<strong>isomap.py</strong> is the main isometric mapper script,
<strong>shadowdat.py</strong> is a script to extract the contents of a Shadow Caster .dat file, and <strong>shadowlib.py</strong> is a script to extract the contents of a Shadow Caster .lib file. In addition to the three scripts above, several supplimentary scripts can be run to gather debug outputs of one form or another, and are listed under the <strong>Other Scripts</strong> heading.

<h3>isomap.py</h3>
<strong>Usage: python isomap.py [LIB FILE] [cd_castr.dat] [hd_castr.dat]</strong>

<p>Generates a isometric map for each level in the specified Shadow Caster
LIB file (typically shadow.lib). The DAT files are used for image data.

<h3>shadowdat.py</h3>
<strong>Usage: python shadowdat.py [DAT FILE]</strong>

<p>Extracts the complete contents of a give Shadowcaster dat file.
Does not support the cutscene dat files from the CD version, only
cd_castr.dat and hd_castr.dat. The .dat file from the floppy version may
also work, although it is unknown how frequently the floppy version uses
the RLE flag.
<h3>shadowlib.py</h3>
<strong>Usage: python shadowlib.py [LIB FILE]</strong>

<p>Extracts the complete contents of a given Shadowcaster lib file. Resources are not interpreted and are written as-is.

<h3>Other Scripts</h3>
<h4>shadowdebugmapper.py</h4>
<strong>Usage: python shadowdebugmapper.py [LIB FILE]...</strong>

<p>Generates a debug HTML file for each level in the specified LIB file.
Each index in the map is output into a cell in an HTML table
containing the following information:<br/>
The map index<br/>
the value for each of the map layers, in order

<h4>shadowsimplemapper.py</h4>

<strong>Usage: python shadowsimplemapper.py [LIB FILE]...</strong>

<p>Generates a debug HTML file for each level in the specified LIB file.
Each index in the map is output into a cell in an HTML table
with lines representing walls.

<h4>shadowmap.py</h4>

<p>I didn't even write any usage instructions for this, but this
can generate image files for each layer of each map in a given lib file,
as well as CSV files for the data from each supplementary data file.</p>

<h2>Notes</h2>

<p>As before, all maps were generated using a Python map generator I wrote. The map generator for Shadow Caster is a bit improved from the ROTT version. I am sure it will improve further for the next game. The map generator decodes all floor/wall/ceiling information, as well as monster/object/item placement. For any other information, manual markup has been added. The manual markup has been kept at a minimum; mostly for area transitions, items dropped by enemies or chests, teleporters, and identifying obelisks. Some potential markup I excluded include identifying traps, marking locked doors, and identifying key puzzles. Some puzzles are identified, but only when they impact something that I already marked, such as a level transition, or the obelisk in LavaMine. Underwater transitions are also not exactly marked, but typically if there is water (or a water-like substince in VesteTst and Vest2Tst), you can dive under. The under water area is always the very next map number.</p>
<p>If anyone would prefer more markup, please let me know and I can create an alternate version of the maps for this purpose.</p>
<p>The maps are identified with their exact filename inside of shadow.lib. Some of the map names are fairly easy to decode, and I could have expanded them to their &#8220;full&#8221; name, but I chose not to. Other maps, such as WaterObe are a bit more cryptic (Water Obelisk?).</p>
<p>Many maps contain inaccessible regions outside the map, suspected to be used for scripting. In almost all cases, I have blanked out these regions for the purposes of displaying only the portions of the maps intended to be viewed in-game. The only exception is the last level, VesteFin, contains a room where all of Veste&#8217;s shapeshifting forms &#8220;wait&#8221; until he changes into each one. I kept this room in order to display all of the forms he uses.</p>
<p>RuinADrn is a bit special, as I actually produced two versions of this map. The first version has the water present, and blanks out any rooms that are inaccessible in this state. The second version reflects how the map appears once the water is drained and the level opens up. RuinAWet is the underwater version of this map. Although technically only a portion of the map is accessible, the whole map is still included.</p>
<p>I have no idea why there is no map 8, 9 or 10. The above maps reflect every .map file inside of shadow.lib. The numbers are based on the number allocated by the in-game automap. As far as I can tell, these maps simple do not exist.</p>
<p>Note that these maps were generated from the CD version. Vest2Tst and VesteMaz are exclusive to this version. In the floppy version, the exit from VesteTst leads directly to VesteFin.</p>

</body></html>
